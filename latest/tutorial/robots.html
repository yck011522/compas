<!DOCTYPE html>
<html lang="en">
<head>
  
  <title> - Robots</title>
  

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

  <meta name="author" content="Tom Van Mele and many others" />
  <meta name="description" content="A computational framework for research and collaboration in AEFC." />

  <link rel="shortcut icon" href="../_static/images/compas.ico" type="image/x-icon">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css" integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.9/styles/default.min.css">
  <link rel="stylesheet" type="text/css" href="../_static/css/compas.css" />
  <link rel="stylesheet" type="text/css" href="../_static/css/compas-reference.css" />

  
    <link rel="next" title="Numerical Data" href="numericaldata.html" />
  
  
  
    <link rel="prev" title="Vol(umetric) Meshes" href="volmeshes.html" />
  

  <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML"></script>
</head>

<body data-spy="scroll" data-target="#compas-toc">
  <!-- header -->
  <header id="header" class="compas-header d-flex align-items-center">
    <nav class="navbar navbar-expand navbar-dark col flex-column flex-md-row text-center">
      <!-- brand -->
      <a class="navbar-brand" href="/index.html">
        <img src="../_static/images/compas_icon_white.png" alt="COMPAS" width="48px" height="48px" />
      </a>
      <!-- brand -->
      <!-- primary -->
      <ul class="navbar-nav">
        <li class="nav-item"><a class="nav-link" href="/index.html">Home</a></li>
        <li class="nav-item active"><a class="nav-link" href="/compas/latest/">Docs</a></li>
        <li class="nav-item"><a class="nav-link" href="/extensions.html">Extensions</a></li>
        <li class="nav-item"><a class="nav-link" href="/examples/">Examples</a></li>
        <li class="nav-item"><a class="nav-link" href="/contribute.html">Contribute</a></li>
      </ul>
      <!-- primary -->
      <ul class="navbar-nav d-none d-md-flex ml-md-auto">
        <!-- version -->
        
        <meta id="doc_versions" data-url="https://compas.dev/compas/doc_versions.txt" data-docs="https://compas.dev/compas/">
        <li class="nav-item nav-versions dropdown">
          <a class="nav-item nav-link dropdown-toggle mr-md-2" href="#" id="bd-versions" data-toggle="dropdown"
            aria-haspopup="true" aria-expanded="false">
            1.7.1
          </a>
          <div id="doc_version_list" class="dropdown-menu dropdown-menu-md-right" aria-labelledby="bd-versions"></div>
        </li>
        
        <!-- version -->
        <!-- social -->
        <li class="nav-item">
          <a class="nav-link" href="http://github.com/compas-dev" target="_blank">
            <span class="fab fa-github fa-1x"></span>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="http://forum.compas-framework.org" target="_blank">
            <span class="fab fa-discourse fa-1x"></span>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://pypi.org/project/COMPAS/" target="_blank">
            <span class="fab fa-python fa-1x"></span>
          </a>
        </li>
        <!-- social -->
      </ul>
    </nav>
  </header>
  <!-- header -->
  <!-- main -->
  <div class="container-fluid">
    <div class="row">
      <!-- content -->
      <main class="col-12 col-md-9 col-xl-7 px-2 px-md-5 pt-2 pb-5 compas-content" role="main">
        
        <nav aria-label="breadcrumb">
          <ol class="breadcrumb mb-3 bg-white px-0">
            <li class="breadcrumb-item"><a href="../index.html">docs</a></li>
            
              <li class="breadcrumb-item"><a href="../tutorial.html">Tutorial</a></li>
            
            <li class="breadcrumb-item active" aria-current="page">Robots</li>
          </ol>
        </nav>
        
  
        
          
          <section id="robots">
<span id="id1"></span><h1>Robots</h1>
<p class="lead">COMPAS provides several fundamental structures and features that simplify working
with robots models, kinematic chains and coordinate frames. On top of this,
the <a class="reference external" href="https://gramaziokohler.github.io/compas_fab/latest/">COMPAS FAB</a> extension
package provides additional functionality to connect these models with planning
and execution tools and libraries.</p>
<section id="coordinate-frames">
<h2>Coordinate frames</h2>
<p>One of the most basic concepts related to robotics that COMPAS provides are
coordinate frames, which are described using the <a class="reference internal" href="../api/generated/compas.geometry.Frame.html#compas.geometry.Frame" title="compas.geometry.Frame"><code class="xref py py-class docutils literal notranslate"><span class="pre">compas.geometry.Frame</span></code></a> class.</p>
<p>In any robotic setup, there exist multiple coordinate frames, and each one is defined
in relation to the next. Examples of typical coordinate frames are:</p>
<ul class="simple">
<li><p>World coordinate frame (<code class="docutils literal notranslate"><span class="pre">WCF</span></code>)</p></li>
<li><p>Robot coordinate frame (<code class="docutils literal notranslate"><span class="pre">RCF</span></code>)</p></li>
<li><p>Tool0 coordinate frame (<code class="docutils literal notranslate"><span class="pre">T0CF</span></code>)</p></li>
<li><p>Tool coordinate frame (<code class="docutils literal notranslate"><span class="pre">TCF</span></code>)</p></li>
<li><p>Object coordinate frame (<code class="docutils literal notranslate"><span class="pre">OCF</span></code>)</p></li>
</ul>
<figure class="figure align-default" id="id3">
<img alt="../_images/coordinate_frames.jpg" class="figure-img img-fluid" src="../_images/coordinate_frames.jpg" />
<figcaption>
<p><span class="caption-text">Coordinate frame convention of a robotic setup.</span></p>
</figcaption>
</figure>
<p>A coordinate frame is defined as a point and two orthonormal base vectors
(<code class="docutils literal notranslate"><span class="pre">xaxis</span></code>, <code class="docutils literal notranslate"><span class="pre">yaxis</span></code>). Both the point and the vectors can be defined
using simple lists of XYZ components or using classes. Frames are
right-handed coordinate systems. The following two examples are equivalent:</p>
<div class="language-python notranslate"><div class="highlight"><pre><code><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">compas.geometry</span> <span class="kn">import</span> <span class="n">Frame</span><span class="p">,</span> <span class="n">Point</span><span class="p">,</span> <span class="n">Vector</span>
</code></pre></div>
</div>
<div class="language-python notranslate"><div class="highlight"><pre><code><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">frame</span> <span class="o">=</span> <span class="n">Frame</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">frame</span><span class="o">.</span><span class="n">point</span>
<span class="go">Point(0.000, 0.000, 0.000)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">frame</span> <span class="o">=</span> <span class="n">Frame</span><span class="p">(</span><span class="n">Point</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">Vector</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">Vector</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">frame</span><span class="o">.</span><span class="n">point</span>
<span class="go">Point(0.000, 0.000, 0.000)</span>
</code></pre></div>
</div>
<p>There are shorthand constructors for the frames located at <code class="docutils literal notranslate"><span class="pre">(0.0,</span> <span class="pre">0.0,</span> <span class="pre">0.0)</span></code>:</p>
<div class="language-python notranslate"><div class="highlight"><pre><code><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f1</span> <span class="o">=</span> <span class="n">Frame</span><span class="o">.</span><span class="n">worldXY</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f2</span> <span class="o">=</span> <span class="n">Frame</span><span class="o">.</span><span class="n">worldYZ</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f3</span> <span class="o">=</span> <span class="n">Frame</span><span class="o">.</span><span class="n">worldZX</span><span class="p">()</span>
</code></pre></div>
</div>
<p>And there are additional constructors to create coordinate frames
from alternative representations such as:</p>
<div class="language-python notranslate"><div class="highlight"><pre><code><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f4</span> <span class="o">=</span> <span class="n">Frame</span><span class="o">.</span><span class="n">from_axis_angle_vector</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">point</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f5</span> <span class="o">=</span> <span class="n">Frame</span><span class="o">.</span><span class="n">from_points</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f6</span> <span class="o">=</span> <span class="n">Frame</span><span class="o">.</span><span class="n">from_quaternion</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">point</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
</code></pre></div>
</div>
<p>The relationship between coordinate frames is expressed as a
<a class="reference internal" href="../api/generated/compas.geometry.Transformation.html#compas.geometry.Transformation" title="compas.geometry.Transformation"><code class="xref py py-class docutils literal notranslate"><span class="pre">compas.geometry.Transformation</span></code></a> between the two, for example:</p>
<div class="language-python notranslate"><div class="highlight"><pre><code><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">compas.geometry</span> <span class="kn">import</span> <span class="n">Transformation</span>
</code></pre></div>
</div>
<div class="language-python notranslate"><div class="highlight"><pre><code><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f1</span> <span class="o">=</span> <span class="n">Frame</span><span class="p">([</span><span class="mi">15</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">15</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f2</span> <span class="o">=</span> <span class="n">Frame</span><span class="o">.</span><span class="n">worldXY</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span> <span class="o">=</span> <span class="n">Transformation</span><span class="o">.</span><span class="n">from_frame_to_frame</span><span class="p">(</span><span class="n">f1</span><span class="p">,</span> <span class="n">f2</span><span class="p">)</span>
<span class="go">Transformation([[0.0, 1.0, 0.0, -15.0], [0.0, 0.0, 1.0, -15.0], [1.0, 0.0, 0.0, -15.0], [0.0, 0.0, 0.0, 1.0]])</span>
</code></pre></div>
</div>
<p>A very common need is to describe the position and rotation of a object
(eg. point, vector, mesh, etc.) in relation to its local coordinate frame,
and then transform it to the world coordinate frame, and vice versa.
These operations are simplified with the methods <code class="docutils literal notranslate"><span class="pre">to_local_coordinates</span></code>
and <code class="docutils literal notranslate"><span class="pre">to_world_coordinates</span></code> of frames:</p>
<div class="language-python notranslate"><div class="highlight"><pre><code><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f1</span> <span class="o">=</span> <span class="n">Frame</span><span class="p">([</span><span class="mi">130</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">80</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">local_point</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f1</span><span class="o">.</span><span class="n">to_world_coordinates</span><span class="p">(</span><span class="n">local_point</span><span class="p">)</span>
<span class="go">Point(140.000, 35.000, 90.000)</span>
</code></pre></div>
</div>
<p>Conversely, an object defined in world coordinate frame can be transformed to
a local coordinate frame using the <code class="docutils literal notranslate"><span class="pre">to_local_coordinates</span></code> method:</p>
<div class="language-python notranslate"><div class="highlight"><pre><code><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">p</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f1</span> <span class="o">=</span> <span class="n">Frame</span><span class="p">([</span><span class="mi">130</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">80</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f1</span><span class="o">.</span><span class="n">to_local_coordinates</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
<span class="go">Point(-120.000, -15.000, -70.000)</span>
</code></pre></div>
</div>
</section>
<section id="robot-models">
<h2>Robot models</h2>
<p>Robotic arms, like those typically used in digital fabrication, are fundamentally
kinematic chains of rigid bodies, i.e. <strong>links</strong>, connected by <strong>joints</strong> to
provide constrained motion. Kinematics is a subdomain of mechanics, and contrary
to dynamics, it concerns the laws of motion without considering forces.</p>
<p>A robot model is a set of links and joints that form a tree structure where each
joint has a coordinate frame around which it rotates or translates, depending
on the joint type.</p>
<p>COMPAS supports robot models defined in a standard robot description format
called <code class="docutils literal notranslate"><span class="pre">URDF</span></code>, which originates in the ROS community.</p>
<section id="links">
<h3>Links</h3>
<p>Links are the rigid bodies in a robot model. They can have zero or more
geometries associated. Associated geometry can serve visual or collision purposes.
Collision geometry is generally a simplified version of visual geometry to speed up
the collision checking process.</p>
</section>
<section id="joints">
<h3>Joints</h3>
<p>Joints are the connecting elements between links. There are four main types
of joints:</p>
<ul class="simple">
<li><p><strong>Revolute</strong>: A hinge joint that rotates along the axis and has a limited
range specified by the upper and lower limits.</p></li>
<li><p><strong>Continuous</strong>: A hinge joint that rotates along the axis and has no limits.</p></li>
<li><p><strong>Prismatic</strong>: A sliding joint that slides along the axis, and has a limited
range specified by the upper and lower limits.</p></li>
<li><p><strong>Fixed</strong>: Not really a joint because it cannot move, all degrees of freedom
are locked.</p></li>
</ul>
</section>
</section>
<section id="visualizing-robots">
<h2>Visualizing Robots</h2>
<p>Before jumping into how to build a robot model, let’s first see how to visualize
one. This can be done with Blender, Rhino or Grasshopper using one of COMPAS’s
artists.  The basic procedure is the same in
any of the CAD software (aside from the import statement). Below you can find an example code for both Rhino and Blender.</p>
<div class="card">
    <div class="card-header">
        <ul class="nav nav-tabs card-header-tabs">
            <li class="nav-item">
                <a class="nav-link active" data-toggle="tab" href="#visualise_robot_rhino">Rhino</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-toggle="tab" href="#visualise_robot_blender">Blender</a>
            </li>
        </ul>
    </div>
    <div class="card-body">
        <div class="tab-content"><div class="tab-pane active" id="visualise_robot_rhino"><p>Be sure to first install COMPAS for Rhino.  While the following code is incomplete,
it can be used as a scaffolding for code to be run in a Python script editor within Rhino.</p>
<div class="language-python notranslate"><div class="highlight"><pre><code><span></span><span class="kn">import</span> <span class="nn">compas</span>
<span class="kn">from</span> <span class="nn">compas.robots</span> <span class="kn">import</span> <span class="n">RobotModel</span>
<span class="kn">from</span> <span class="nn">compas_rhino.artists</span> <span class="kn">import</span> <span class="n">RobotModelArtist</span>

<span class="n">model</span> <span class="o">=</span> <span class="n">RobotModel</span><span class="p">(</span><span class="s1">&#39;Robby&#39;</span><span class="p">)</span>

<span class="c1"># Add some geometry to Robby here</span>

<span class="n">artist</span> <span class="o">=</span> <span class="n">RobotModelArtist</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">layer</span><span class="o">=</span><span class="s1">&#39;COMPAS::Example Robot&#39;</span><span class="p">)</span>
<span class="n">artist</span><span class="o">.</span><span class="n">clear_layer</span><span class="p">()</span>
<span class="n">artist</span><span class="o">.</span><span class="n">draw_visual</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
<div class="tab-pane" id="visualise_robot_blender"><div class="language-python notranslate"><div class="highlight"><pre><code><span></span><span class="kn">import</span> <span class="nn">compas</span>
<span class="kn">from</span> <span class="nn">compas.robots</span> <span class="kn">import</span> <span class="n">RobotModel</span>
<span class="kn">import</span> <span class="nn">compas_blender</span>
<span class="kn">from</span> <span class="nn">compas_blender.artists</span> <span class="kn">import</span> <span class="n">RobotModelArtist</span>

<span class="n">compas_blender</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>  <span class="c1"># Delete all objects in the Blender scene</span>

<span class="n">model</span> <span class="o">=</span> <span class="n">RobotModel</span><span class="p">(</span><span class="s1">&#39;Robby&#39;</span><span class="p">)</span>

<span class="c1"># Add some geometry to Robby here</span>

<span class="c1"># Load the robot geometry into the blender scene</span>
<span class="n">artist</span> <span class="o">=</span> <span class="n">RobotModelArtist</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">collection</span><span class="o">=</span><span class="s1">&#39;COMPAS::Example Robot&#39;</span><span class="p">)</span>
</code></pre></div>
</div>
<p>Note that the blender <code class="docutils literal notranslate"><span class="pre">RobotModelArtist</span></code> is not as developed as the one for Rhino.</p>
</div></div>
</div>
</div><p>See below for a complete example of how to programmatically create a Robotmodel.</p>
</section>
<section id="building-robots-models">
<h2>Building robots models</h2>
<p>Robot models are represented by the <a class="reference internal" href="../api/generated/compas.robots.RobotModel.html#compas.robots.RobotModel" title="compas.robots.RobotModel"><code class="xref py py-class docutils literal notranslate"><span class="pre">compas.robots.RobotModel</span></code></a> class.
There are various ways to construct a robot model. The following snippet
shows how to construct one programmatically:</p>
<div class="language-python notranslate"><div class="highlight"><pre><code><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">compas.robots</span> <span class="kn">import</span> <span class="n">Joint</span><span class="p">,</span> <span class="n">Link</span><span class="p">,</span> <span class="n">RobotModel</span>
</code></pre></div>
</div>
<div class="language-python notranslate"><div class="highlight"><pre><code><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">j1</span> <span class="o">=</span> <span class="n">Joint</span><span class="p">(</span><span class="s1">&#39;joint_1&#39;</span><span class="p">,</span> <span class="s1">&#39;revolute&#39;</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="s1">&#39;base&#39;</span><span class="p">,</span> <span class="n">child</span><span class="o">=</span><span class="s1">&#39;link_1&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">j2</span> <span class="o">=</span> <span class="n">Joint</span><span class="p">(</span><span class="s1">&#39;joint_2&#39;</span><span class="p">,</span> <span class="s1">&#39;revolute&#39;</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="s1">&#39;link_1&#39;</span><span class="p">,</span> <span class="n">child</span><span class="o">=</span><span class="s1">&#39;link_2&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">j3</span> <span class="o">=</span> <span class="n">Joint</span><span class="p">(</span><span class="s1">&#39;joint_3&#39;</span><span class="p">,</span> <span class="s1">&#39;revolute&#39;</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="s1">&#39;link_2&#39;</span><span class="p">,</span> <span class="n">child</span><span class="o">=</span><span class="s1">&#39;link_3&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">j4</span> <span class="o">=</span> <span class="n">Joint</span><span class="p">(</span><span class="s1">&#39;joint_4&#39;</span><span class="p">,</span> <span class="s1">&#39;revolute&#39;</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="s1">&#39;link_3&#39;</span><span class="p">,</span> <span class="n">child</span><span class="o">=</span><span class="s1">&#39;link_4&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">j5</span> <span class="o">=</span> <span class="n">Joint</span><span class="p">(</span><span class="s1">&#39;joint_5&#39;</span><span class="p">,</span> <span class="s1">&#39;revolute&#39;</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="s1">&#39;link_4&#39;</span><span class="p">,</span> <span class="n">child</span><span class="o">=</span><span class="s1">&#39;link_5&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">j6</span> <span class="o">=</span> <span class="n">Joint</span><span class="p">(</span><span class="s1">&#39;joint_6&#39;</span><span class="p">,</span> <span class="s1">&#39;revolute&#39;</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="s1">&#39;link_5&#39;</span><span class="p">,</span> <span class="n">child</span><span class="o">=</span><span class="s1">&#39;link_6&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l0</span> <span class="o">=</span> <span class="n">Link</span><span class="p">(</span><span class="s1">&#39;base&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l1</span> <span class="o">=</span> <span class="n">Link</span><span class="p">(</span><span class="s1">&#39;link_1&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l2</span> <span class="o">=</span> <span class="n">Link</span><span class="p">(</span><span class="s1">&#39;link_2&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l3</span> <span class="o">=</span> <span class="n">Link</span><span class="p">(</span><span class="s1">&#39;link_3&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l4</span> <span class="o">=</span> <span class="n">Link</span><span class="p">(</span><span class="s1">&#39;link_4&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l5</span> <span class="o">=</span> <span class="n">Link</span><span class="p">(</span><span class="s1">&#39;link_5&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l6</span> <span class="o">=</span> <span class="n">Link</span><span class="p">(</span><span class="s1">&#39;link_6&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">links</span> <span class="o">=</span> <span class="p">[</span><span class="n">l0</span><span class="p">,</span> <span class="n">l1</span><span class="p">,</span> <span class="n">l2</span><span class="p">,</span> <span class="n">l3</span><span class="p">,</span> <span class="n">l4</span><span class="p">,</span> <span class="n">l5</span><span class="p">,</span> <span class="n">l6</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">joints</span> <span class="o">=</span> <span class="p">[</span><span class="n">j1</span><span class="p">,</span> <span class="n">j2</span><span class="p">,</span> <span class="n">j3</span><span class="p">,</span> <span class="n">j4</span><span class="p">,</span> <span class="n">j5</span><span class="p">,</span> <span class="n">j6</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">robot</span> <span class="o">=</span> <span class="n">RobotModel</span><span class="p">(</span><span class="s1">&#39;johnny-5&#39;</span><span class="p">,</span> <span class="n">joints</span><span class="o">=</span><span class="n">joints</span><span class="p">,</span> <span class="n">links</span><span class="o">=</span><span class="n">links</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">robot</span><span class="o">.</span><span class="n">get_configurable_joint_names</span><span class="p">()</span>
<span class="go">[&#39;joint_1&#39;, &#39;joint_2&#39;, &#39;joint_3&#39;, &#39;joint_4&#39;, &#39;joint_5&#39;, &#39;joint_6&#39;]</span>
</code></pre></div>
</div>
<p>This approach can end up being very verbose, so the methods <code class="docutils literal notranslate"><span class="pre">add_link</span></code>
and <code class="docutils literal notranslate"><span class="pre">add_joint</span></code> of <a class="reference internal" href="../api/generated/compas.robots.RobotModel.html#compas.robots.RobotModel" title="compas.robots.RobotModel"><code class="xref py py-class docutils literal notranslate"><span class="pre">compas.robots.RobotModel</span></code></a> offer an alternative that
significantly reduces the amount of code required.  Starting with an empty
robot model, adding a link in the shape of a box is as easy as:</p>
<div class="language-python notranslate"><div class="highlight"><pre><code><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">compas.geometry</span> <span class="kn">import</span> <span class="n">Box</span><span class="p">,</span> <span class="n">Frame</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">compas.robots</span> <span class="kn">import</span> <span class="n">RobotModel</span>
</code></pre></div>
</div>
<div class="language-python notranslate"><div class="highlight"><pre><code><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">model</span> <span class="o">=</span> <span class="n">RobotModel</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Boxy&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">box</span> <span class="o">=</span> <span class="n">Box</span><span class="p">(</span><span class="n">Frame</span><span class="o">.</span><span class="n">worldXY</span><span class="p">(),</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mf">.5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">add_link</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;box_link&#39;</span><span class="p">,</span> <span class="n">visual_meshes</span><span class="o">=</span><span class="p">[</span><span class="n">box</span><span class="p">])</span>
</code></pre></div>
</div>
<p>This code snippet can be modified and run in a Rhino python editor
to visualize Boxy.  Throughout the rest of this tutorial, the code
snippets will include the lines for visualization in Rhino, but be
aware that the class <a class="reference internal" href="../api/generated/compas.robots.RobotModel.html#compas.robots.RobotModel" title="compas.robots.RobotModel"><code class="xref py py-class docutils literal notranslate"><span class="pre">compas.robots.RobotModel</span></code></a> can be used,
and is useful, outside of a CAD environment.</p>
<div class="language-python notranslate"><div class="highlight"><pre><code><span></span><span class="kn">from</span> <span class="nn">compas.geometry</span> <span class="kn">import</span> <span class="n">Box</span><span class="p">,</span> <span class="n">Frame</span>
<span class="kn">from</span> <span class="nn">compas.robots</span> <span class="kn">import</span> <span class="n">RobotModel</span>
<span class="kn">from</span> <span class="nn">compas_rhino.artists</span> <span class="kn">import</span> <span class="n">RobotModelArtist</span>

<span class="n">model</span> <span class="o">=</span> <span class="n">RobotModel</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Boxy&#39;</span><span class="p">)</span>
<span class="n">box</span> <span class="o">=</span> <span class="n">Box</span><span class="p">(</span><span class="n">Frame</span><span class="o">.</span><span class="n">worldXY</span><span class="p">(),</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mf">.5</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">add_link</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;box_link&#39;</span><span class="p">,</span> <span class="n">visual_meshes</span><span class="o">=</span><span class="p">[</span><span class="n">box</span><span class="p">])</span>

<span class="n">artist</span> <span class="o">=</span> <span class="n">RobotModelArtist</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">layer</span><span class="o">=</span><span class="s1">&#39;COMPAS::Example Robot&#39;</span><span class="p">)</span>
<span class="n">artist</span><span class="o">.</span><span class="n">clear_layer</span><span class="p">()</span>
<span class="n">artist</span><span class="o">.</span><span class="n">draw_visual</span><span class="p">()</span>
</code></pre></div>
</div>
<figure class="figure align-default">
<img alt="../_images/boxy_1.png" class="figure-img img-fluid" src="../_images/boxy_1.png" />
</figure>
<p>As can be seen, this has added a box of dimensions <code class="docutils literal notranslate"><span class="pre">1</span></code> x <code class="docutils literal notranslate"><span class="pre">2</span></code> x <code class="docutils literal notranslate"><span class="pre">.5</span></code>
whose geometric center and orientation coincides with the world XY frame.
The <code class="docutils literal notranslate"><span class="pre">visual_meshes</span></code> argument can be given a list containing COMPAS
primitives such as <a class="reference internal" href="../api/generated/compas.geometry.Box.html#compas.geometry.Box" title="compas.geometry.Box"><code class="xref py py-class docutils literal notranslate"><span class="pre">compas.geometry.Box</span></code></a> or the more complex
COMPAS meshes <code class="xref py py-class docutils literal notranslate"><span class="pre">compas.geometry.Mesh</span></code>. For simplicity,
this tutorial uses only primitives.</p>
<p>To reposition the box relative to the link’s
origin, simply change the frame of the provided box. To move the box so that it sits
above the XY plane, the origin must be shifted in the z-direction by half the height
of the box.  The box is also shifted slightly forward in the y-direction:</p>
<div class="language-python notranslate"><div class="highlight"><pre><code><span></span><span class="kn">from</span> <span class="nn">compas.geometry</span> <span class="kn">import</span> <span class="n">Box</span><span class="p">,</span> <span class="n">Frame</span>
<span class="kn">from</span> <span class="nn">compas.robots</span> <span class="kn">import</span> <span class="n">RobotModel</span>
<span class="kn">from</span> <span class="nn">compas_rhino.artists</span> <span class="kn">import</span> <span class="n">RobotModelArtist</span>

<span class="n">model</span> <span class="o">=</span> <span class="n">RobotModel</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Boxy&#39;</span><span class="p">)</span>
<span class="n">box</span> <span class="o">=</span> <span class="n">Box</span><span class="p">(</span><span class="n">Frame</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mf">.5</span><span class="p">,</span> <span class="mf">.25</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]),</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mf">.5</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">add_link</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;box_link&#39;</span><span class="p">,</span> <span class="n">visual_meshes</span><span class="o">=</span><span class="p">[</span><span class="n">box</span><span class="p">])</span>

<span class="n">artist</span> <span class="o">=</span> <span class="n">RobotModelArtist</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">layer</span><span class="o">=</span><span class="s1">&#39;COMPAS::Example Robot&#39;</span><span class="p">)</span>
<span class="n">artist</span><span class="o">.</span><span class="n">clear_layer</span><span class="p">()</span>
<span class="n">artist</span><span class="o">.</span><span class="n">draw_visual</span><span class="p">()</span>
</code></pre></div>
</div>
<figure class="figure align-default">
<img alt="../_images/boxy_2.png" class="figure-img img-fluid" src="../_images/boxy_2.png" />
</figure>
<p>A link may have more than one geometric element associated to it.  Now
there is a stack of two boxes:</p>
<div class="language-python notranslate"><div class="highlight"><pre><code><span></span><span class="kn">from</span> <span class="nn">compas.geometry</span> <span class="kn">import</span> <span class="n">Box</span><span class="p">,</span> <span class="n">Frame</span>
<span class="kn">from</span> <span class="nn">compas.robots</span> <span class="kn">import</span> <span class="n">RobotModel</span>
<span class="kn">from</span> <span class="nn">compas_rhino.artists</span> <span class="kn">import</span> <span class="n">RobotModelArtist</span>

<span class="n">model</span> <span class="o">=</span> <span class="n">RobotModel</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Boxy&#39;</span><span class="p">)</span>
<span class="n">box_1</span> <span class="o">=</span> <span class="n">Box</span><span class="p">(</span><span class="n">Frame</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mf">.5</span><span class="p">,</span> <span class="mf">.25</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]),</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mf">.5</span><span class="p">)</span>
<span class="n">box_2</span> <span class="o">=</span> <span class="n">Box</span><span class="p">(</span><span class="n">Frame</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]),</span> <span class="mf">.5</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">add_link</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;box_link&#39;</span><span class="p">,</span> <span class="n">visual_meshes</span><span class="o">=</span><span class="p">[</span><span class="n">box_1</span><span class="p">,</span> <span class="n">box_2</span><span class="p">])</span>

<span class="n">artist</span> <span class="o">=</span> <span class="n">RobotModelArtist</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">layer</span><span class="o">=</span><span class="s1">&#39;COMPAS::Example Robot&#39;</span><span class="p">)</span>
<span class="n">artist</span><span class="o">.</span><span class="n">clear_layer</span><span class="p">()</span>
<span class="n">artist</span><span class="o">.</span><span class="n">draw_visual</span><span class="p">()</span>
</code></pre></div>
</div>
<figure class="figure align-default">
<img alt="../_images/boxy_3.png" class="figure-img img-fluid" src="../_images/boxy_3.png" />
</figure>
<p>Remember that the frame of the box is the geometric center of the box relative
to the link’s origin (which, in this case, happens to be the world XY frame).
So to stack the boxes, the center of <code class="docutils literal notranslate"><span class="pre">box_2</span></code> must be placed at a height of
<code class="docutils literal notranslate"><span class="pre">&lt;height</span> <span class="pre">of</span> <span class="pre">box_1&gt;</span> <span class="pre">+</span> <span class="pre">1/2</span> <span class="pre">*</span> <span class="pre">&lt;height</span> <span class="pre">of</span> <span class="pre">box_2&gt;</span> <span class="pre">=</span> <span class="pre">.5</span> <span class="pre">+</span> <span class="pre">.5</span> <span class="pre">*</span> <span class="pre">7</span> <span class="pre">=</span> <span class="pre">4</span></code>.</p>
<p>One link does not an interesting robot make.  The following code snippet adds
a cylindrical second link as well as a joint connecting the two.</p>
<div class="language-python notranslate"><div class="highlight"><pre><code><span></span><span class="kn">from</span> <span class="nn">compas.geometry</span> <span class="kn">import</span> <span class="n">Box</span><span class="p">,</span> <span class="n">Circle</span><span class="p">,</span> <span class="n">Cylinder</span><span class="p">,</span> <span class="n">Frame</span><span class="p">,</span> <span class="n">Plane</span><span class="p">,</span> <span class="n">Vector</span>
<span class="kn">from</span> <span class="nn">compas.robots</span> <span class="kn">import</span> <span class="n">Joint</span><span class="p">,</span> <span class="n">RobotModel</span>
<span class="kn">from</span> <span class="nn">compas_rhino.artists</span> <span class="kn">import</span> <span class="n">RobotModelArtist</span>

<span class="n">model</span> <span class="o">=</span> <span class="n">RobotModel</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Jointy&#39;</span><span class="p">)</span>
<span class="n">box_1</span> <span class="o">=</span> <span class="n">Box</span><span class="p">(</span><span class="n">Frame</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mf">.5</span><span class="p">,</span> <span class="mf">.25</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]),</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mf">.5</span><span class="p">)</span>
<span class="n">box_2</span> <span class="o">=</span> <span class="n">Box</span><span class="p">(</span><span class="n">Frame</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]),</span> <span class="mf">.5</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span>
<span class="n">box_link</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">add_link</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;box_link&#39;</span><span class="p">,</span> <span class="n">visual_meshes</span><span class="o">=</span><span class="p">[</span><span class="n">box_1</span><span class="p">,</span> <span class="n">box_2</span><span class="p">])</span>

<span class="n">cylinder</span> <span class="o">=</span> <span class="n">Cylinder</span><span class="p">(</span><span class="n">Circle</span><span class="p">(</span><span class="n">Plane</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]),</span> <span class="mf">.5</span><span class="p">),</span> <span class="mi">8</span><span class="p">)</span>
<span class="n">cylinder_link</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">add_link</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;cylinder_link&#39;</span><span class="p">,</span> <span class="n">visual_meshes</span><span class="o">=</span><span class="p">[</span><span class="n">cylinder</span><span class="p">])</span>

<span class="n">origin</span> <span class="o">=</span> <span class="n">Frame</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">7</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="n">axis</span> <span class="o">=</span> <span class="n">Vector</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">add_joint</span><span class="p">(</span>
     <span class="n">name</span><span class="o">=</span><span class="s1">&#39;box_cylinder_joint&#39;</span><span class="p">,</span>
     <span class="nb">type</span><span class="o">=</span><span class="n">Joint</span><span class="o">.</span><span class="n">CONTINUOUS</span><span class="p">,</span>
     <span class="n">parent_link</span><span class="o">=</span><span class="n">box_link</span><span class="p">,</span>
     <span class="n">child_link</span><span class="o">=</span><span class="n">cylinder_link</span><span class="p">,</span>
     <span class="n">origin</span><span class="o">=</span><span class="n">origin</span><span class="p">,</span>
     <span class="n">axis</span><span class="o">=</span><span class="n">axis</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">artist</span> <span class="o">=</span> <span class="n">RobotModelArtist</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">layer</span><span class="o">=</span><span class="s1">&#39;COMPAS::Example Robot&#39;</span><span class="p">)</span>
<span class="n">artist</span><span class="o">.</span><span class="n">clear_layer</span><span class="p">()</span>
<span class="n">artist</span><span class="o">.</span><span class="n">draw_visual</span><span class="p">()</span>
</code></pre></div>
</div>
<figure class="figure align-default">
<img alt="../_images/jointy.png" class="figure-img img-fluid" src="../_images/jointy.png" />
</figure>
<p>There’s a lot going on in this snippet, so let’s break it down.  First, the link
containing the stacked boxes is added, but the geometry has been shifted to the
side <code class="docutils literal notranslate"><span class="pre">2</span></code> units in the x-direction.  Second, a cylindrical link is added.
The cylinder has height <code class="docutils literal notranslate"><span class="pre">8</span></code> and radius <code class="docutils literal notranslate"><span class="pre">.5</span></code> and is vertically oriented.  Finally, a
joint is added.  This is the most involved operation so far, so let’s explore
this in detail.</p>
<p>Several parameters must be defined for the joint to be sensible.
The required parameters for a minimally defined joint are the <code class="docutils literal notranslate"><span class="pre">name</span></code>, <code class="docutils literal notranslate"><span class="pre">type</span></code>,
<code class="docutils literal notranslate"><span class="pre">parent_link</span></code> and <code class="docutils literal notranslate"><span class="pre">child_link</span></code>.  The location and orientation of the joint is defined
by the <code class="docutils literal notranslate"><span class="pre">origin</span></code>, which specifies a frame relative to the origin of the <code class="docutils literal notranslate"><span class="pre">parent_link</span></code>.
In this case, the location of the joint is located <code class="docutils literal notranslate"><span class="pre">7</span></code> units above (ie,
in the z-direction) the origin of the <code class="docutils literal notranslate"><span class="pre">box_link</span></code>, making it <code class="docutils literal notranslate"><span class="pre">.5</span></code> units below the top
of the second box.  The origin of the joint also specifies the origin of its
<code class="docutils literal notranslate"><span class="pre">child_link</span></code>.  Here, this means that the center of the cylinder will coincide with
the location of the joint.  Since the geometries of the boxes have been shifted,
the boxes and the cylinder do not overlap.  If the joint origin is not specified,
it will default to coincide with the origin of the <code class="docutils literal notranslate"><span class="pre">parent_link</span></code>.  Since a continuous
joint was added, it makes sense that the axis of rotation would also need to be given.
Here, the joint will rotate about the joint origin’s x-axis.</p>
<p>Adding a bit more geometry and a few links with fixed joints and we arrive at a rough
model of the classic drinking bird toy (full code
<a class="reference download internal" download="" href="../_downloads/c079c85f54e5ac91ef4c4789c083747a/drinking_bird.py"><code class="xref download docutils literal notranslate"><span class="pre">here</span></code></a>).</p>
<figure class="figure align-default">
<img alt="../_images/drinking_bird.png" class="figure-img img-fluid" src="../_images/drinking_bird.png" />
</figure>
<p>While it can be useful to programmatically create a robot, more often than not, robot
models are loaded from URDF files. To load a URDF into a robot model, use the
<code class="docutils literal notranslate"><span class="pre">from_urdf_file</span></code> method:</p>
<div class="language-python notranslate"><div class="highlight"><pre><code><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">model</span> <span class="o">=</span> <span class="n">RobotModel</span><span class="o">.</span><span class="n">from_urdf_file</span><span class="p">(</span><span class="s1">&#39;ur5.urdf&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
</code></pre></div>
</div>
<p>Since a large number of robot models defined in URDF are available on Github,
there are specialized loaders that allow loading an entire model including
its linked geometry directly from a Github repository:</p>
<div class="language-python notranslate"><div class="highlight"><pre><code><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">compas</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">compas.robots</span> <span class="kn">import</span> <span class="n">GithubPackageMeshLoader</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">compas.robots</span> <span class="kn">import</span> <span class="n">RobotModel</span>
</code></pre></div>
</div>
<div class="language-python notranslate"><div class="highlight"><pre><code><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Set high precision to import meshes defined in meters</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">compas</span><span class="o">.</span><span class="n">PRECISION</span> <span class="o">=</span> <span class="s1">&#39;12f&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">github</span> <span class="o">=</span> <span class="n">GithubPackageMeshLoader</span><span class="p">(</span><span class="s1">&#39;ros-industrial/abb&#39;</span><span class="p">,</span> <span class="s1">&#39;abb_irb6600_support&#39;</span><span class="p">,</span> <span class="s1">&#39;kinetic-devel&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span> <span class="o">=</span> <span class="n">RobotModel</span><span class="o">.</span><span class="n">from_urdf_file</span><span class="p">(</span><span class="n">github</span><span class="o">.</span><span class="n">load_urdf</span><span class="p">(</span><span class="s1">&#39;irb6640.urdf&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">load_geometry</span><span class="p">(</span><span class="n">github</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
<span class="go">Robot name=abb_irb6640, Links=11, Joints=10 (6 configurable)</span>
</code></pre></div>
</div>
<p>Another common scenario is to load robot models from a running ROS system.
<a class="reference external" href="https://www.ros.org/">ROS (Robot Operating System)</a> is a very complex and
mature tool, and its setup is beyond the scope of this tutorial, but
an overview of some of the installation options is available
<a class="reference external" href="https://gramaziokohler.github.io/compas_fab/latest/backends/ros.html">here</a>.
Once ROS is configured on your system, the most convenient way to load the
robot model is to use <strong>COMPAS FAB</strong> and its ROS integration.
The following snippet shows how to load the robot model currently active in ROS:</p>
<div class="language-python notranslate"><div class="highlight"><pre><code><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">compas_fab.backends</span> <span class="kn">import</span> <span class="n">RosClient</span>
</code></pre></div>
</div>
<div class="language-python notranslate"><div class="highlight"><pre><code><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">RosClient</span><span class="p">()</span> <span class="k">as</span> <span class="n">ros</span><span class="p">:</span>
<span class="gp">... </span>   <span class="n">robot</span> <span class="o">=</span> <span class="n">ros</span><span class="o">.</span><span class="n">load_robot</span><span class="p">(</span><span class="n">load_geometry</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">... </span>   <span class="nb">print</span><span class="p">(</span><span class="n">robot</span><span class="o">.</span><span class="n">model</span><span class="p">)</span>
</code></pre></div>
</div>
</section>
<section id="fk-ik-path-planning">
<h2>FK, IK &amp; Path Planning</h2>
<p>Robot models are the base for a large number of additional features that are
provided via extension packages. In particular, features such as
forward and inverse kinematic solvers and path planning are built on top of
these robot models, but are integrated into
<a class="reference external" href="https://gramaziokohler.github.io/compas_fab/latest/">COMPAS FAB</a>.</p>
<p>For further details about these features, check the detailed examples in
COMPAS FAB documentation.</p>
</section>
</section>

        
      </main>
      <!-- content -->
      <!-- sidebar -->
      <div class="col-12 col-md-3 compas-sidebar" role="navigation"> 
        <form id="search" class="d-flex align-items-center compas-searchbox" action="../search.html" method="get">
          <input class="form-control" type="text" name="q" placeholder="Search docs" />
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
          <button class="navbar-toggler d-md-none" type="button" data-toggle="collapse" data-target="#compas-navigation" aria-controls="compas-navigation" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
        </form>
        
        
        <div id="compas-navigation" class="collapse compas-navigation">
          <ul class="nav flex-column active">
<li class="nav-item"><a class="nav-link reference internal" href="../index.html">Introduction</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="../installation.html">Installation</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="../gettingstarted.html">Getting started</a></li>
<li class="nav-item active"><a class="nav-link reference internal" href="../tutorial.html">Tutorial</a><ul class="nav flex-column active">
<li class="nav-item"><a class="nav-link reference internal" href="geometry.html">Geometry</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="networks.html">Networks</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="meshes.html">Meshes</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="volmeshes.html">Vol(umetric) Meshes</a></li>
<li class="nav-item active"><a class="nav-link active current reference internal" href="#">Robots</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="numericaldata.html">Numerical Data</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="rpc.html">Remote Procedure Calls</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="geomaps.html">Geometric Maps</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="serialization.html">Data Serialization</a></li>
</ul>
</li>
<li class="nav-item"><a class="nav-link reference internal" href="../api.html">API Reference</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="../plugins.html">Extension points</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="../devguide.html">Developer Guide</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="../changelog.html">Changelog</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="../releases.html">Releases</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="../license.html">License</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="../citing.html">Citing</a></li>
</ul>

        </div>
        
      </div>
      <!-- sidebar -->
      <!-- toc -->
      <div class="d-none d-xl-block col-xl-2 compas-toc" role="toc">
        
        <ul class="nav flex-column" id="compas-toc">
<li class="nav-item"><a class="nav-link reference internal" href="#">Robots</a><ul class="nav flex-column">
<li class="nav-item"><a class="nav-link reference internal" href="#coordinate-frames">Coordinate frames</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="#robot-models">Robot models</a><ul class="nav flex-column">
<li class="nav-item"><a class="nav-link reference internal" href="#links">Links</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="#joints">Joints</a></li>
</ul>
</li>
<li class="nav-item"><a class="nav-link reference internal" href="#visualizing-robots">Visualizing Robots</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="#building-robots-models">Building robots models</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="#fk-ik-path-planning">FK, IK &amp; Path Planning</a></li>
</ul>
</li>
</ul>

      </div>
      <!-- toc -->
    </div>
  </div>
  <!-- main -->
  <!-- footer -->
  <footer class="compas-footer">
    <nav class="nav p-2">
      
        <a href="volmeshes.html" title="Vol(umetric) Meshes" class="nav-link footer-link float-start text-left d-flex w-50" rel="prev">
          <div class="nav-button p-2 m-2"><i class="fas fa-arrow-left"></i></div>
          <div class="nav-title flex-grow-1 align-self-center">
            <div class="nav-direction small font-weight-light">Previous</div>
            Vol(umetric) Meshes
          </div>
        </a>
      

      
        <a href="numericaldata.html" title="Numerical Data" class="nav-link footer-link float-end text-right d-flex w-50" rel="next">
          <div class="nav-title footer-link flex-grow-1 align-self-center">
            <div class="nav-direction small font-weight-light">Next</div>
            Numerical Data
          </div>
          <div class="nav-button p-2 m-2"><i class="fas fa-arrow-right"></i></div>
        </a>
      
    </nav>  
  </footer>
  <!-- footer -->
  <!-- below -->
  <div class="below py-5">
    <div class="container">
      <div class="row flex-column">
        <div class="col-12 col-md-6 mx-md-auto text-center">
          <h4 class="mb-4 mt-0 below-text">COMPAS</h4>
          <p class="below-text">
            A computational framework for collaboration and research
            in Architecture, Engineering, Fabrication, and Construction.
          </p>
          <!-- <nav class="nav justify-content-center my-4">
            <a href="#" class="nav-link btn btn-light mx-2" target="_blank">Newsletter</a>
          </nav> -->
          <nav class="nav justify-content-center pb-3">
            <a class="nav-link mx-2 px-0 below-link" href="http://github.com/compas-dev" target="_blank">
              <span class="fab fa-github fa-1x"></span>
            </a>
            <a class="nav-link mx-2 px-0 below-link" href="http://forum.compas-framework.org" target="_blank">
              <span class="fab fa-discourse fa-1x"></span>
            </a>
            <a class="nav-link mx-2 px-0 below-link" href="https://pypi.org/project/COMPAS/" target="_blank">
              <span class="fab fa-python fa-1x"></span>
            </a>
          </nav>
        </div>
      </div>
      <div class="row">
        <div class="col text-center">
          <p class="p-0 m-0 below-text">Copyright &copy; 2017-2021 compas-dev</p>
        </div>
      </div>
    </div>
  </div>
  <!-- below -->
  <!-- scripts -->
  <script type="text/javascript">
  var DOCUMENTATION_OPTIONS = {
    URL_ROOT          : '',
    VERSION           : '1.7.1',
    COLLAPSE_INDEX    : false,
    FILE_SUFFIX       : '.html',
    HAS_SOURCE        : 'false',
    SOURCELINK_SUFFIX : '.txt'
  };
  </script>

  <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
  <script src="https:////cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.1/highlight.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.0.0/anchor.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js"></script>

  <script src="../_static/underscore.js"></script>
  <script src="../_static/doctools.js"></script>
  <script src="../_static/js/searchtools_.js"></script>

  <script>
  $(document).ready(function() {
  $(".language-default code").addClass("python");
  $(".language-python code").addClass("python");
  $(".language-bash code").addClass("bash");
  $(".language-cpp code").addClass("cpp");
  $(".language-json code").addClass("json");
  $(".language-none code").addClass("plaintext");

  hljs.initHighlighting();
  anchors.add();

  $('.nav-versions .dropdown-item').filter(function(i, ver) {
      return window.location.href.startsWith(ver.href);
  }).addClass("active");
  });

  var url = $("#doc_versions").data("url");
  var docs_site = $("#doc_versions").data("docs");

  if (url) {
    $.get(url, res=>{
      var lines = res.match(/[^\r\n]+/g);
      lines.forEach(version => {
        $("#doc_version_list").append("<a class=\"dropdown-item\" href=\""+ docs_site + version + "/\">" + version + "</a>");
      });
    })
  }
  </script>
  <!-- scripts -->
  
  
</body>
</html>